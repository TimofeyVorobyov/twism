(function(a){a.fn.twism=function(){var b=this;if(typeof arguments[0]==="string"){action=arguments[0];options=arguments[1]||null;callback=arguments[2]||null;}else{if(typeof arguments[0]==="object"){action="create";options=arguments[0];callback=arguments[1]||null;}else{if(typeof arguments[0]==="function"){action="create";options=null;callback=arguments[0];}else{action="create";options=null;callback=null;}}}var e=function(f,h){var g=b;b.remove();if(typeof h==="function"){h();}return;};var d=function(g,m){var j=a.extend({map:"world",customMap:false,territories:true,antarctica:false,color:"#A9DA8A",border:"white",align:"center",backgroundColor:"#4af",borderWidth:"2",height:null,width:null,click:function(n){if(n){alert(n);}},hover:function(){return;},hoverColor:"#BB0029",hoverBorder:"yellow",littleRedBook:true,hideCountries:null,disableCountries:null,individualCountrySettings:null},g);var k=b;k.css({width:(j.width||"100%"),height:(j.height||"100%")});if(j.map=="world"){var h=(j.antarctica)?"world-map-with-antarctica.svg":"world-map.svg";}else{if(j.map=="usa"){var h="Blank_US_territories.svg";if(!j.territories){if(!j.hideCountries){j.hideCountries=[];}j.hideCountries.push("VI");j.hideCountries.push("GU");j.hideCountries.push("MP");j.hideCountries.push("AS");j.hideCountries.push("PR");}}else{if(j.map=="custom"){var f=j.customMap;}}}if(typeof(require)!=="undefined"){var l=h;f=require.toUrl("twism").replace("jquery.twism","maps/"+h);}else{if(!j.customMap){f="dist/maps/"+h;}else{f=j.customMap;}}k.load(f,null,function(p){a("svg",k).attr({height:k.height(),width:k.width()}).css({background:j.backgroundColor,margin:"auto",display:"block"});var o=j.hideCountries;for(i in o){a("path#"+o[i],k).remove();}a("svg path",k).css({fill:j.color,stroke:j.border,strokeWidth:j.borderWidth});var n=j.individualCountrySettings;for(i in n){a("svg path#"+n[i].name,k).css({fill:n[i].color||j.color,stroke:n[i].border||j.border});}a("svg",k).on("click",function(q){lastclicked=a(q.target).attr("id");j.click(lastclicked);});a("svg path",k).on("mouseover",function(r){if(n&&n.length){var q=a.map(n,function(t){return t.name;});}var s=a(r.target).attr("id");if(j.disableCountries&&j.disableCountries.indexOf(s)==-1){if(n&&q.indexOf(s)>-1){for(i in n){if(n[i].name==s){a("svg path#"+n[i].name,k).css({fill:n[i].hoverColor||j.hoverColor,stroke:n[i].hoverBorder||j.hoverBorder});}}}else{a("path#"+s,k).css({fill:j.hoverColor,stroke:j.hoverBorder});}if(j.littleRedBook){if(s=="cn"||s=="tw"||s=="hk"||s=="mc"){a("path#tw, path#cn, path#hk, path#mc").css({fill:j.hoverColor,stroke:j.hoverBorder});}}}});a("svg path",k).on("mouseout",function(q){var r=a(q.target).attr("id");a("path#"+r,k).css({fill:j.color,stroke:j.border});for(i in n){a("svg path#"+n[i].name,k).css({fill:n[i].color||j.color,stroke:n[i].border||j.border});}if(j.littleRedBook){if(r=="cn"||r=="tw"||r=="hk"||r=="mc"){a("path#tw, path#cn, path#hk, path#mc").css({fill:j.color,stroke:j.border});}}});if(typeof m==="function"){m();}});return k;};var c=function(f){if(f.color){a("svg path#"+f.name).css({fill:f.color});a("svg path#"+f.name).on("mouseout",function(){a(this).css({fill:f.color});});}if(f.border){a("svg path#"+f.name).css({stroke:f.border});a("svg path#"+f.name).on("mouseout",function(){a(this).css({stroke:f.border});});}if(f.borderWidth){a("svg path#"+f.name).css({strokeWidth:f.borderWidth});}if(f.hoverColor){a("svg path#"+f.name).on("mouseover",function(g){a("svg path#"+f.name).css({fill:f.hoverColor});if(f.hoverBorder){a("svg path#"+f.name).css({stroke:f.hoverBorder});}});a("svg path#"+f.name).on("mouseout",function(g){a("svg path#"+f.name).css({fill:f.color});if(f.hoverBorder){a("svg path#"+f.name).css({stroke:f.border});}});}if(f.click){a("svg path#"+f.name).on("click",function(g){g.stopPropagation();lastclicked=a(g.target).attr("id");f.click(lastclicked);});}if(f.hover){a("svg path#"+f.name).on("mouseover",function(g){g.stopPropagation();lastclicked=a(g.target).attr("id");f.hover(lastclicked);});}};switch(action){case"create":return d(options,callback);break;case"destroy":return e(options,callback);break;case"setCountry":return c(options);break;default:return d(options,callback);}};}(jQuery));