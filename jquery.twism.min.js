(function(a){a.fn.twism=function(){var b=this;if(typeof arguments[0]==="string"){action=arguments[0];options=arguments[1]||null;callback=arguments[2]||null;}else{if(typeof arguments[0]==="object"){action="create";options=arguments[0];callback=arguments[1]||null;}else{if(typeof arguments[0]==="function"){action="create";options=null;callback=arguments[0];}else{action="create";options=null;callback=null;}}}var e=function(f,h){var g=b;b.remove();if(typeof h==="function"){h();}return;};var d=function(g,k){var h=a.extend({map:"world",customMap:false,territories:true,antarctica:false,color:"#A9DA8A",border:"white",align:"center",backgroundColor:"#4af",borderWidth:"2",height:null,width:null,click:function(l){if(l){alert(l);}},hover:function(){return;},hoverColor:"#BB0029",hoverBorder:"yellow",littleRedBook:true,hideCountries:null,individualCountrySettings:null},g);var j=b;j.css({width:(h.width||"100%"),height:(h.height||"100%")});if(h.map=="world"){var f=(h.antarctica)?"maps/world-map-with-antarctica.svg":"maps/world-map.svg";}else{if(h.map=="usa"){var f="maps/Blank_US_territories.svg";if(!h.territories){if(!h.hideCountries){h.hideCountries=[];}h.hideCountries.push("VI");h.hideCountries.push("GU");h.hideCountries.push("MP");h.hideCountries.push("AS");h.hideCountries.push("PR");}}else{if(h.map=="custom"){var f=h.customMap;}}}console.log(f);j.load(f,null,function(n){a("svg",j).attr({height:j.height(),width:j.width()}).css({background:h.backgroundColor,margin:"auto",display:"block"});var m=h.hideCountries;for(i in m){a("path#"+m[i],j).remove();}a("svg path",j).css({fill:h.color,stroke:h.border,strokeWidth:h.borderWidth});var l=h.individualCountrySettings;for(i in l){a("svg path#"+l[i].name,j).css({fill:l[i].color||h.color,stroke:l[i].border||h.border});}a("svg",j).on("click",function(o){lastclicked=a(o.target).attr("id");h.click(lastclicked);});a("svg path",j).on("mouseover",function(p){if(l&&l.length){var o=a.map(l,function(r){return r.name;});}var q=a(p.target).attr("id");if(l&&o.indexOf(q)>-1){for(i in l){if(l[i].name==q){a("svg path#"+l[i].name,j).css({fill:l[i].hoverColor||h.hoverColor,stroke:l[i].hoverBorder||h.hoverBorder});}}}else{a("path#"+q,j).css({fill:h.hoverColor,stroke:h.hoverBorder});}if(h.littleRedBook){if(q=="cn"||q=="tw"||q=="hk"||q=="mc"){a("path#tw, path#cn, path#hk, path#mc").css({fill:h.hoverColor,stroke:h.hoverBorder});}}});a("svg path",j).on("mouseout",function(o){var p=a(o.target).attr("id");a("path#"+p,j).css({fill:h.color,stroke:h.border});for(i in l){a("svg path#"+l[i].name,j).css({fill:l[i].color||h.color,stroke:l[i].border||h.border});}if(h.littleRedBook){if(p=="cn"||p=="tw"||p=="hk"||p=="mc"){a("path#tw, path#cn, path#hk, path#mc").css({fill:h.color,stroke:h.border});}}});if(typeof k==="function"){k();}});return j;};var c=function(f){if(f.color){a("svg path#"+f.name).css({fill:f.color});a("svg path#"+f.name).on("mouseout",function(){a(this).css({fill:f.color});});}if(f.border){a("svg path#"+f.name).css({stroke:f.border});a("svg path#"+f.name).on("mouseout",function(){a(this).css({stroke:f.border});});}if(f.borderWidth){a("svg path#"+f.name).css({strokeWidth:f.borderWidth});}};switch(action){case"create":return d(options,callback);break;case"destroy":return e(options,callback);break;case"setCountry":return c(options);break;default:return d(options,callback);}};}(jQuery));